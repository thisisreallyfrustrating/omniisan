<!doctype html>

<html lang=en>
  <head>
    <meta charset="utf-8"/>

    <title>Omniisan</title> <meta name="description" content="Turns
                                                              popular fanfiction into epub"/>
    <link href="https://unpkg.com/papercss@1.7.0/dist/paper.min.css"
          rel="stylesheet"/>

    <style>
      html, body { height: 100%; } .container, nav { opacity: 0.93; }
      .bg-image { /* The image used */
          background-image:
              url("background.jpg"); /* Full height */
          height: 100%;
          
          /* Center and scale the image nicely */
          background-position: center;

          background-repeat: no-repeat; 
          background-size: cover; 
      }
    </style>

  </head>
  <body class="bg-image">
    <nav class="border" style="margin-bottom: 20px;">
      <div class="nav-brand">
        <h3><a href="#">Omniisan</a></h3>
      </div>
    </nav>

    <div class="paper container" style="margin-bottom: 20px;">
      <h2 style="margin: 0 0 20px 0; font-size: 1.5rem;">Now you too
        can have an epub for your favorite fanfic!</h2>

      <div style="text-align: center">
        <form class="job">
          <div class="form-group">
            <input type="text" placeholder="https://forums.spacebattles.com/..." name="url"  style="display: inline; width: 80%;">
            <button type="submit" class="btn-secondary" value="submit">Get</button>
          </div>

          <div class="form-group">
            <label for="filetype">Select ebook file type:</label>
            <select name="filetype" style="display: inline;">
              <option value="epub">epub</option>
              <option value="mobi">mobi</option>
            </select>
          </div>

          <fieldset class="form-group">
            <label for="paperRadios1" class="paper-radio">
              <input type="radio" name="task" id="paperRadios1" checked value="all"> <span>Get all chapters<span>
            </label>
            <label for="paperRadios2" class="paper-radio">
              <input type="radio" name="task" id="paperRadios2" value="chapters">

              
              <span>Get the most recent
                <select name="last_chapters" style="display: inline;">
                  <option selected value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select> chapters</span>
            </label>
          </fieldset>



        </form>
        <p>
          <strong>Enter a link to the story in the box above, select
            the file type you want for the ebook, and hit Get.</strong>
        </p>
      </div>
    </div>
</div>



<div class="paper container" style="height:400px; overflow: auto;">
  <p style="margin-top: 0;"><strong>Notes</strong></p>
  <p> <a href="http://www.omnibuser.com/">Omnibuser</a> sadly shut
    down in July 2020. Omniisan is a quick-and-dirty clone of
    omnibuser built to take advantage of the
    excellent <a href="https://github.com/JimmXinu/FanFicFare">fanficfare</a>
    tool.</p>
  <p>The goal of this project is to be near zero maintenance for me so
    it can live forever.</p>
  <p>This tool currently will make ebooks for the following sites:</p>
  <ul>
    <li><a href="https://spacebattles.org/">Spacebattles</a></li>
    <li><a href="https://sufficientvelocity.org/">Sufficientvelocity</a></li>
  </ul>
  <p>Where possible, rather than using this site, use the fanficfare
    plugin for Calibre which is
    documented <a href="https://github.com/JimmXinu/FanFicFare/wiki/CalibrePlugin">here</a>.</p>

  <p>The code for omnibuser can be
    found <a href="https://github.com/valedan/omnibuser">here</a> and
    would be a much more sensible place to start if anyone wanted to
    make a proper go at things rather than contributing to my spaghetti.</p>

  <p style="margin-top: 0;"><strong>Contact</strong></p>
  <p><bdo dir="rtl">gro.fds@otsirc</bdo></p>
</div>
<script>
  const handleFormSubmit = e => {
      event.preventDefault();
      const data = {};
      const formData = new FormData(e.target);

      return fetch('/task', {
          method: 'POST',
          headers: {  'Content-Type': 'application/json' },
          body: JSON.stringify(Object.fromEntries(formData))
      });
  };

  const form = document.getElementsByClassName('job')[0];
  form.addEventListener('submit', handleFormSubmit);
</script>

</body>
</html>
